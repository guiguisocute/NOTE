[^_^]:~~我一直觉得这门课程的衔接性做的非常的差劲，还是把他当做课堂笔记用吧~~
## 概述
---
## 应用层
---

## 传输层

### 传输层的定义与服务
##### Th1:传输层是为*应用层* 提供`服务`的
> 用一种不形象的比喻：传输层类似于两个单位（主机）各自的个人（端）之间数据收发的 *中枢*

传输层的核心任务是为`应用` `进程`之间提供 ***端[^1]到端*** 的**逻辑通讯服务**
|主要功能|简单注释|
|----|----|
|传输层寻址|寻找应用程序的端口方法|
|应用层报文的分段与重组||
|报文的差错检测||
|进程间的端到端可靠数据传输控制||
|面向应用层的实现复用与分解|复用：分解：|
|端到端的流量控制|因为计算机之间的性能与网络带宽有所差别，传输层必须控制流量以实现数据传输时延的同步|
|拥塞控制|减缓或消除请求数据过多时发生的网络拥堵（Ddos）|
##### TH2: 传输层协议只需要在端系统中实现
- 为了高效，以及保证可靠性，传输层只主机应用进程与服务器服务进程的数据交互。



##### Th3: 通信的真正端点并不是`主机`，而是主机中运行的`应用进程`
- 主机与主机的通讯靠网络层来实现
#### 传输层的寻址
- 寻址时的唯一以及统一的标识——端口号
- IP地址+`端口`号可以唯一标识一个全网的通信端点（应用进程）
    - 不同的计算机可以拥有同一个端口号
- 传输层的端口号为16位的整数，包含三类端口：

|端口类型|数值范围（DEC）|注释|
|-------|-------|-----|
|熟知端口|0~1023|IANA给特定常用的*网络协议*&nbsp;所指定的特定的端口（如：HTTP:80）|
|登记端口|1024~49151|服务器端常用|
|客户端口号or短暂端口号|49152~65535|**不固定**，&nbsp;留给客户端进程选择**暂时**使用|
#### 传输层的复用与分解
`复用`：发送方将应用报文封装成对应协议的IP数据段
`分解（分用）`：接收方将对应的IP数据段分解成各种可供应用层使用的应用报文
`多路复用与分解`：让所有的端与端的数据交换使用 *同一个* 协议
##### 在无连接的多路复用与多路分解
UDP的套接字：<目的地Ip+端口号>
##### 在面向连接的多路复用与多路分解
TCP的套接字：<标识一条TCP链接>————<源IP地址，端口号，目的IP地址，端口号>

#### 可靠数据传输的基本原理

|实现可靠数据传输的措施|原理|
|----|---|
|差错检测|利用`差错编码`实现数据包传输的差错检测|
|确认|接收方反馈接受状态|
|重传|重新发送接收方没有正确接收的数据|
|序号|确保数据按序提交|
|计时器|解决数据丢失问题以及时延|
实现可靠数据传输的各种协议：
- 停-等协议：主要特点就是发送一段报文后就停下来等待接收方的确认
    1. 发送方经过差错编码和编号的报文段，等待接收方的确认；***发送并等待确认***
    2.  
    3. 
    - 缺点：降低了信道利用率
- 改善停等协议缺陷——流水线协议：
    1. 允许发送方在没有收到确认前连续发送多个分组
    2. 增加分组序号范围
    3. 发送方and/or接受方必须*缓存* 多个分组
        - 典型的流水线协议————`滑动窗口协议`
![滑动窗口协议图解]()


    
#### 无连接服务与面向连接服务
##### 无连接服务
不经过握手[^2]，直接构造传输层报文并向接收端发送
——`UDP`协议属于这项服务
*“不可靠”传输*
##### 有链接服务
数据传输之前，需要交换控制信息，建立*逻辑链接* ，然后  **再**传输数据，结束后还需要**拆除**链接
——`TCP`协议属于这项服务
*“可靠”传输*

[^1]:端：指进程，进程使用PID来标识，但操作系统各有不同PID也歌各有不同，因而使用端口号在TCP/IP体系下标识
[^2]:代派


